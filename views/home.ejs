
<head>
    <link rel="stylesheet" href="/styles.css" />
  </head>

<!-- views/home.ejs -->
<div class="flex justify-center items-center h-20">
    <button
      class="bg-blue-500 text-white rounded-lg p-3 cursor-pointer"
      onclick="toggleForm()"
    >
      <%= showForm ? "Close Form" : "Add New" %>
    </button>
  </div>
  
  <% if (showForm) { %>
  <div class="p-4 border rounded-lg shadow-md max-w-md mx-auto">
    <form action="<%= editTransaction ? `/update-transaction/${editTransaction.id}` : '/add-transaction' %>" method="POST">
      <input type="hidden" name="id" value="<%= editTransaction ? editTransaction.id : '' %>" />
  
      <div class="mb-3">
        <label class="block">Title</label>
        <input type="text" name="title" class="w-full p-2 border rounded" placeholder="Enter Title" value="<%= editTransaction ? editTransaction.title : '' %>" />
      </div>
  
      <div class="mb-3">
        <label class="block">Amount</label>
        <input type="number" name="amount" class="w-full p-2 border rounded" placeholder="Enter Amount" value="<%= editTransaction ? editTransaction.amount : '' %>" />
      </div>
  
      <div class="mb-3">
        <label class="block">Type</label>
        <select name="type" class="w-full p-2 border rounded">
          <option value="income" <%= editTransaction && editTransaction.type === 'income' ? 'selected' : '' %>>Income</option>
          <option value="expense" <%= editTransaction && editTransaction.type === 'expense' ? 'selected' : '' %>>Expense</option>
        </select>
      </div>
  
      <div class="mb-3">
        <label class="block">Category</label>
        <input type="text" name="category" class="w-full p-2 border rounded" placeholder="Enter Category" value="<%= editTransaction ? editTransaction.category : '' %>" />
      </div>
  
      <button class="bg-green-500 text-white p-2 rounded w-full mt-2">
        <%= editTransaction ? "Update Transaction" : "Save Transaction" %>
      </button>
    </form>
  </div>
  <% } %>
  
  <div class="w-full p-3 bg-amber-300 mt-5">
    <table class="w-full">
      <thead>
        <tr>
          <th class="text-left">Date</th>
          <th class="text-left">Title</th>
          <th class="text-left">Amount</th>
          <th class="text-left">Type</th>
          <th class="text-left">Category</th>
          <th class="text-left">Actions</th>
        </tr>
      </thead>
      <tbody>
        <% if (transactions.length > 0) { %>
          <% transactions.forEach(tx => { %>
            <tr class="h-10">
              <td><%= tx.date %></td>
              <td><%= tx.title %></td>
              <td><%= tx.amount %></td>
              <td><%= tx.type %></td>
              <td><%= tx.category %></td>
              <td>
                <form action="/edit-transaction/<%= tx.id %>" method="GET" style="display:inline">
                  <button class="bg-yellow-500 text-white px-3 py-1 rounded mr-2 cursor-pointer">Edit</button>
                </form>
                <form action="/delete-transaction/<%= tx.id %>" method="POST" style="display:inline">
                  <button class="bg-red-500 text-white px-3 py-1 rounded cursor-pointer">Delete</button>
                </form>
              </td>
            </tr>
          <% }) %>
        <% } else { %>
          <tr>
            <td colspan="6" class="text-center">No Transactions Found</td>
          </tr>
        <% } %>
      </tbody>
    </table>
  </div>
  
  <script>
    function toggleForm() {
      window.location.href = window.location.href.includes('?form=true') ? '/' : '/?form=true';
    }
  </script>
  